name: PHP CodeSniffer

on:
  # push:
  #   branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]

jobs:
  phpcs:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4

    - name: Setup PHP
      uses: shivammathur/setup-php@v2
      with:
        php-version: '8.2'
        tools: phpcs

    - name: Install WordPress Coding Standards
      run: composer global require wp-coding-standards/wpcs

    - name: Set PHPCS standard path
      run: ./vendor/bin/phpcs --config-set installed_paths ./vendor/wp-coding-standards/wpcs

    - name: Run PHP CodeSniffer
      run: phpcs --standard=ruleset.xml src
